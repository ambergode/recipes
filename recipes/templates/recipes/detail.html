{% extends "base.html" %}

{% block title %} 
    {{ recipe.name }} 
{% endblock %}

{% block main %}

    {% if recipe.photo %}
        <img class="recipe_image img-fluid img-thumbnail" src="{{ recipe.photo.url }}" alt="recipe photo">
    {% endif %}
    <h1 class="inline">{{ recipe.name|title }}</h1>
    <div class="container">
        <div class="row g-1">
            <div class="col-md-auto">
                <form name="recipe_card_list" action="{% url 'recipes:detail' recipe.id %}" method="post">
                    {% csrf_token %}
                    <input name="list_toggle" type="submit" class="btn-check" id="list-{{recipe.name}}" onChange="this.document.getElementById('recipe_card').submit()">
                    <input name="recipe_id" type="hidden" value={{ recipe.id }}>
                    {% if recipe.in_shopping %}
                        <label value="Remove from list" class="btn btn-success btn-sm g" for="list-{{recipe.name}}">list</label>
                    {% else %}
                        <label value="Add to list" class="btn btn-danger btn-sm g" for="list-{{recipe.name}}">list</label>
                    {% endif %}
                </form>
            </div>
            <div class="col-md-auto">
                <form name="recipe_card_planning" action="{% url 'recipes:detail' recipe.id %}" method="post">
                    {% csrf_token %}
                    <input name="plan_toggle" type="submit" class="btn-check" id="plan-{{recipe.name}}" onChange="this.document.getElementById('recipe_card').submit()">
                    <input name="recipe_id" type="hidden" value={{ recipe.id }}>
                    {% if recipe.in_planning %}
                        <label value="Remove from plan" class="btn btn-success btn-sm" for="plan-{{recipe.name}}">plan</label>
                    {% else %}
                        <label value="Add to plan" class="btn btn-danger btn-sm" for="plan-{{recipe.name}}">plan</label>
                    {% endif %}
                </form>
                <form name="edit_recipe" action="{% url 'recipes:display_edit_recipe' recipe.id %}" method="post">
                    {% csrf_token %}
                    <input type='submit' value="Edit" class="btn btn-primary">
                </form>
            </div>
        </div>
    </div>
    <p>
        <span class="food_category">{{ recipe.snack_or_meal|capfirst }}</span>
        <span class="recipe_description">
            {{ recipe.description }}
        </span>
    </p>
    <p class="recipe_time">
        <b>Prep:</b> {{ recipe.prep_time }} min{{ recipe.prep_time|pluralize }}
        <b>Cook:</b> {{ recipe.cook_time }} min{{ recipe.cook_time|pluralize }}
        <b>Total:</b> {{ total }} min{{ total|pluralize }}
        <br>
        <b>Servings:</b> {{ recipe.servings }} serving{{ recipe.servings|pluralize }}
    </p>
    <div class="ingredient_list">
        <h5>Ingredients:</h5>
        <ul class="invisible_bullet">
            {% for ingredient in ingredients %}
            <li>
                <input type="checkbox" name="ing_checkbox">
                <label for="ing_checkbox">    
                    {{ ingredient.0.quantity|floatformat }} {{ ingredient.1|lower }}{{ ingredient.0.quantity|pluralize}} {{ ingredient.0.ingredient }}
                </label>
            </li>
            {% endfor %}
        </ul>
    </div>  
    <div class="step_list">
        <h5>Steps:</h5>
        <ol>
        {% for step in steps %}
            <li>
                <input type="checkbox" name="step_checkbox">
                <label for="step_checkbox">    
                    {{ step.step }}
                </label>
            </li>
        {% endfor %}
        </ol>
    </div>       
{% endblock %}

